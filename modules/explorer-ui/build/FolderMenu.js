"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FolderMenu=void 0;var jsx_runtime_1=require("react/jsx-runtime"),api_1=require("api"),fs_util_js_1=require("fs-util-js"),js_util_1=require("js-util"),react_with_native_1=require("react-with-native"),explorer_core_ui_1=require("explorer-core-ui"),NavButton_1=require("./NavButton"),FoldersPiece_1=require("./FoldersPiece"),store_1=require("./store"),fancy_loader_1=require("fancy-loader"),FolderMenu=function(){var e,t,i=(0,store_1.useStore)("menu.isMobileMenuEnabled"),r=(i[0],i[1]),s=(0,explorer_core_ui_1.useQueryPath)(),a=(0,explorer_core_ui_1.useCustomProjectRelativeBaseFolderPath)().customProjectRelativeBaseFolderPath,o=api_1.queries.useGetNavigationWithContext({queryPath:s,customProjectRelativeBaseFolderPath:a}),l=(0,js_util_1.destructureOptionalObject)(null===(e=o.data)||void 0===e?void 0:e.result),n=l.projectRelativeFilePath,u=l.projectRelativeFolderPath,_=l.queryIsFolder,c=l.navigation,v=l.isSuccessful,d=l.message,j=(l.canRead,l.canWrite,_?void 0:(0,fs_util_js_1.getFileOrFolderName)(n)),p=null===(t=api_1.queries.useGetExplorableBasePathsWithContext().data)||void 0===t?void 0:t.result,f=null==p?void 0:p.map((function(e){var t="/".concat(e.projectRelativePath),i=s.startsWith(e.projectRelativePath);return __assign(__assign({},e),{href:t,isActive:i})})),h=null==f?void 0:f.map((function(e){var t=e.href,i=e.isActive,r=e.name;return(0,jsx_runtime_1.jsx)(NavButton_1.NavButton,{href:t,title:r,isActive:i},"explorable".concat(r))})),x=!1===v?(0,jsx_runtime_1.jsx)(react_with_native_1.P,{children:d}):null==c?void 0:c.map((function(e){
// if it's a file, we need to remove the name
var t=[u,e.name].filter(js_util_1.notEmpty),i="/"+fs_util_js_1.path.join.apply(fs_util_js_1.path,t),s=i.startsWith("/")?i:"/".concat(i),a=[e.isDraft?"ðŸ§ª":void 0,e.isPrivate?"ðŸ”‘":void 0,e.isSecret?"ðŸ”’":void 0].filter(js_util_1.notEmpty).join(""),o=e.name.split(".").pop(),l={ts:"âŒ˜",tsx:"âŒ˜",json:"ðŸ’¿",md:"ðŸ“„"},n=e.isFileCollection?"ðŸ—ž":"file"===e.type?Object.keys(l).includes(o)?l[o]:"ðŸ“„":"ðŸ“‚",_=e.isFileCollection?(0,fs_util_js_1.withoutSubExtensions)(e.name):e.name;return(0,jsx_runtime_1.jsx)(NavButton_1.NavButton,{onClick:function(){"folder"!==e.type&&r(!1)},isActive:j===e.name,href:s,id:s,title:"".concat(n," ").concat(_," ").concat(a)})}));
/**
     * Render everything
     *
     */
return(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({className:"w-full lg:h-full lg:overflow-y-scroll"},{children:(0,jsx_runtime_1.jsxs)("div",__assign({className:"flex flex-col w-full"},{children:[o.isLoading?(0,jsx_runtime_1.jsx)(fancy_loader_1.FancyLoader,{}):null,h,(0,jsx_runtime_1.jsx)(FoldersPiece_1.FoldersPiece,{queryPath:n||s,explorableBasePathsActive:f,filename:j,isFolder:_}),x]}))}))};exports.FolderMenu=FolderMenu;
//# sourceMappingURL=FolderMenu.js.map