{
  "createdAt": 1678041731166,
  "updatedAt": 1678041731166,
  "deletedAt": 0,
  "createdFirstAt": 1678041731166,
  "isApiExposed": false,
  "isExported": true,
  "operationRelativeTypescriptFilePath": "src/components/function-web/FunctionPage.tsx",
  "commentsInside": [],
  "rawText": " () => {\n  const router = useRouter();\n\n  const fullPath = router.query.paths ? makeArray(router.query.paths) : [];\n  const functionName = fullPath.pop()!;\n\n  const functionMarkdownString =\n    queries.useTsFunctionNameToMarkdownString(functionName)?.data?.result;\n\n  const queryPath = getQueryPath(router.query);\n\n  const tsFunctionQuery = queries.useGetTsFunction(functionName);\n  // todo : add query to tsFunction\n  const { tsFunction } = destructureOptionalObject(\n    tsFunctionQuery.data?.result\n  );\n\n  const functionExecutions =\n    queries.useGetFunctionExecutions(functionName).data?.result || [];\n\n  const renderNavigation = () => {\n    return (\n      <Div className=\"flex flex-row justify-between\">\n        {queryPath.length > 1 ? (\n          <ClickableIcon\n            emoji=\"⬅\"\n            onClick={() => {\n              const parts = queryPath.split(\"/\");\n              parts.pop();\n              const oneFolderUp = parts.join(\"/\");\n              router.push(oneFolderUp.length === 0 ? \"/\" : oneFolderUp);\n            }}\n          />\n        ) : null}\n        <P className=\"text-3xl\">{functionName}</P>\n        <Div />\n      </Div>\n    );\n  };\n\n  const renderPage = () => {\n    if (!tsFunction) {\n      return tsFunctionQuery.isLoading ? (\n        <FancyLoader big />\n      ) : (\n        <P>Select a function to get to work</P>\n      );\n    }\n\n    /**\n  ### Tab 7: Recent executions tab\n  \n  `FunctionExecution[].sort(createdAt).slice(0,100)`\n  \n  Actions for every item:\n  \n  - set `isTest` to true\n  - set `isExample` to true\n  - fill in in form in tab 1\n  - execute directly\n  \n     */\n    const recentTab = {\n      title: \"Recent\",\n      emoji: \"🕰️\",\n      renderTab: () => {\n        return (\n          <FunctionExecutionTable\n            tsFunction={tsFunction}\n            type={\"recent\"}\n            functionExecutions={functionExecutions}\n          />\n        );\n      },\n    };\n\n    const formTab = {\n      title: \"Form\",\n      emoji: \"📝\",\n      renderTab: () => <FormTab tsFunction={tsFunction} />,\n    };\n\n    /** \n  ### Tab 2: Function Docs\n\n  Generate on the fly based on the `TsFunction` (extrahere from docs generation lib)\n\n  */\n    const docsTab = {\n      title: \"Docs\",\n      emoji: \"ℹ️\",\n      renderTab: () => {\n        // TODO: use `props.functionData.tsFunction.operationRelativeTypescriptFilePath` to deterimne markdown file path and folder\n\n        // Every function should have some realtime docs in the `/function/*` page: how to use as an API using `api` or `queries`? how to use with curl? How to use with Swift? How to use in Python? Take the thing generated for `README` and add this to the function thing.\n\n        // Bruna, Bhagya, rug students, and any other developer needs to know how to use the API and how to set up your own home server\n\n        // Every function needs crystal clear instructions on how to use it as API\n\n        const queryName = `use${pascalCase(tsFunction.name)}`;\n        const content = `# ${tsFunction.name}\n        \n${tsFunction.description || \"No description\"}\n\n# Footprint\n\n${functionMarkdownString || \"Loading...\"}\n\n# Usage\n\nYou can run this function either using the SDK (see \\`sdk-api\\`) or by using the api directly. You can also install it into your own monorepo, if you have access to the code.\n\n## Using \\`sdk-api\\`\n\n\\`\\`\\`tsx\n\nimport { api, queries } from \"api\";\n\n// use either the api, or the query\nconst { ${tsFunction.name} } = api;\nconst { ${queryName} } = queries;\n\nconst YourComponent = () => {\n\n  const ${tsFunction.name}Query = ${queryName}(/* parameters here */);\n\n  // use your query\n\n  const executeApi = () => {\n\n    // execute this when you like\n    ${tsFunction.name}(/*parameters*/)\n\n  }\n\n  return <div>do things</div>\n}\n\n\\`\\`\\`\n\n## Using another programming language\n\nYou can just call it using the \\`homeserver\\` setup:\n\n- call the POST endpoint \\`https://yourapidomain.com/function/${\n          tsFunction.name\n        }\\`\n- in the body, put this JSON: \\`{ parameters: [/* array of all parameters going into the function */], authToken: \"YOUR_AUTH_TOKEN\" }\\`\n\nThat's it!\n\n## Examples\n\nExamples coming soon! Stay tuned.\n\n[CURL EXAMPLE HERE]\n\n[JAVASCRIPT EXAMPLE HERE]\n\n[PYTHON EXAMPLE HERE]\n\n[SWIFT EXAMPLE HERE]\n\n## Installing in the monorepo\n\n\\`\\`\\`ts\n\nimport { ${tsFunction.name} } from \"${tsFunction.operationName}\";\n\n//execute where you like, without api\n${tsFunction.name}(/*parameters*/)\n\n\\`\\`\\`\n\n# More help\n\n- [Settings and API info](/settings)\n- [How to build something cool with Clarity AI](/files/knowledge/docs/clarity/readme.md)\n\nTODO:\n\n- There needs to be an easy to find documentation linked from every function to learn more about how to make any app on top of the homeserver. Starter kits are awesome. Instruct bhagya and students for this. \"show others how to make money with clarity AI\"\n- Example: how to build a blog generator with Clarity AI, etc\n\n`;\n        return (\n          <Div>\n            <Div>\n              <MarkdownContent content={content} config={{}} />\n            </Div>\n          </Div>\n        );\n      },\n    };\n\n    /**\n     * TAB 3: Code\n     *\n     * TODO: Can later be replaced with the writer-input for the file of the function, so you can immediately see your coding result in the other tabs...\n     */\n    const codeTab = {\n      title: \"Code\",\n      emoji: \"💻\",\n      renderTab: () => {\n        return tsFunction?.rawText ? (\n          <Div className=\"flex flex-col items-center\">\n            <MarkdownCodeblock\n              text={`const ${tsFunction.name} =${tsFunction.rawText}`}\n              extension=\"ts\"\n              isModeStatic\n              minimalMode=\"full\"\n            />\n\n            <Div className=\"flex flex-col items-center pt-8 gap gap-6\">\n              <P>Wanna start?</P>\n\n              <BigButton\n                title=\"Open in VSCode\"\n                onClick={async () => {\n                  if (!tsFunction.operationName) {\n                    errorToast(\n                      \"Couldn't find which operation this function belongs to, can't open the file\"\n                    );\n                    return;\n                  }\n\n                  const result = await api.vscodeOpen({\n                    files: [\n                      {\n                        operationName: tsFunction.operationName,\n                        operationRelativeFilePath:\n                          tsFunction.operationRelativeTypescriptFilePath,\n                      },\n                    ],\n                  });\n\n                  return;\n                }}\n                emoji=\"👨‍💻\"\n              />\n            </Div>\n          </Div>\n        ) : (\n          \"Code not found\"\n        );\n      },\n    };\n\n    /**\n            ### Tab 4: Exersize tab\n\n            Get all examples of this function, write exersize in markdown (ask Wijnand for more details)\n            */\n\n    const exersizeTab = {\n      title: \"Exersizes\",\n      emoji: \"👶\",\n      renderTab: () => {\n        return \"ex\";\n      },\n    };\n\n    /**\n### Tab 5: Examples Tab\n\n`FunctionExecution[].filter(x.isExample)`\n\nShow `x.exampleDescription` too (markdown)\n\nActions for every item:\n\n- set `isExample` to false\n- set `isTest` to true\n- fill in in form in tab 1\n- execute directly\n\n*/\n\n    const examplesTab = {\n      title: \"Examples\",\n      emoji: \"👻\",\n      renderTab: () => {\n        return (\n          <FunctionExecutionTable\n            tsFunction={tsFunction}\n            type={\"example\"}\n            functionExecutions={functionExecutions}\n          />\n        );\n      },\n    };\n\n    /**\n### Tab 6: Tests Tab\n\n`FunctionExecution[].filter(x.isTest))`\n\nActions for every item:\n\n- set `isTest` to false\n- set `isExample` to true\n- fill in in form in tab 1\n- execute directly\n*/\n\n    const testsTab = {\n      title: \"Tests\",\n      emoji: \"🔧\",\n      renderTab: () => {\n        return (\n          <FunctionExecutionTable\n            tsFunction={tsFunction}\n            type={\"test\"}\n            functionExecutions={functionExecutions}\n          />\n        );\n      },\n    };\n\n    const dataTab = {\n      title: \"Data\",\n      emoji: \"💿\",\n      renderTab: () => {\n        return \"This tab can later show the models that are put under in the doc-comment as being relevant. E.g. if you put 'DATA: JeepType, LocationType' in your function's doc-comment, it would show the CRUD-UI for those models in this tab. Possibly, one tab for every model, or simply one tab for all models and visually make it disabled if there is no data connected to the function...\";\n      },\n    };\n\n    const mediaTab = {\n      title: \"Media\",\n      emoji: \"👥\",\n      renderTab: () => {\n        return (\n          <Div>\n            <Ul>\n              <Li>Show related postables & media-posts</Li>\n              <Li>Create new postable</Li>\n              <Li>\n                Basically, the social-media-ui but just focussed on this\n                function\n              </Li>\n            </Ul>\n          </Div>\n        );\n      },\n    };\n\n    const treeTab = {\n      title: \"Trees\",\n      emoji: \"🌳\",\n      renderTab: () => {\n        return (\n          <Div className=\"w-max h-80\">\n            <Ul>\n              <Li>\n                Show graph with the function in the middle, below all functions\n                that are required for the function (dependencies), above all the\n                functions that require this function (dependents)\n              </Li>\n              <Li>\n                Being able to see this multiple multiple layers deep would be\n                great (configurable).\n              </Li>\n              <Li>\n                Dependencies must be brown (root like) while dependents (up)\n                must be green (leave like)\n              </Li>\n              <Li>\n                Other tree: find other functions that take the output type of\n                this function as its input. Use the output of your\n                FunctionExecutions on \"related\" functions.\n              </Li>\n            </Ul>\n\n            <Test />\n          </Div>\n        );\n      },\n    };\n    return (\n      <Div>\n        {renderNavigation()}\n\n        <Tabs\n          tabKey=\"function\"\n          tabs={[\n            docsTab,\n            codeTab,\n            formTab,\n            //dataTab,\n            recentTab,\n            testsTab,\n            examplesTab,\n            //treeTab,\n            //exersizeTab,\n            //mediaTab,\n          ]}\n        />\n      </Div>\n    );\n  };\n\n  return (\n    <Div className=\"pb-4 px-4 w-full\" scroll>\n      {renderPage()}\n    </Div>\n  );\n}",
  "name": "FunctionPage",
  "slug": "function-page",
  "parameters": [],
  "description": "",
  "returnType": {
    "rawType": "JSX.Element",
    "typeDefinition": {
      "optional": false,
      "$ref": "#/definitions/JSX.Element"
    },
    "typeCoverage": 0,
    "isArray": false,
    "isEnum": false,
    "isObject": true,
    "isPrimitive": false,
    "isEnumLiteral": false
  },
  "maxIndentationDepth": 13,
  "size": {
    "characters": 10511,
    "lines": 408,
    "bytes": 10543,
    "bytesPerCharacter": 1.0030444296451337,
    "charactersPerLine": 26,
    "linesPerFile": 408,
    "numberOfFiles": 1
  },
  "id": "curkzbpezzxfotjdeipldawh"
}